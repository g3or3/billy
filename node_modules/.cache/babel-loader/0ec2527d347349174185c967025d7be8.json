{"ast":null,"code":"\"use strict\";\n\nvar Parser = require(\"fastparse\");\n\nfunction commentMatch(match, content) {\n  this.value.nodes.push({\n    type: \"comment\",\n    content: content\n  });\n}\n\nfunction spacingMatch(match) {\n  var item = this.value.nodes[this.value.nodes.length - 1];\n  item.after = (item.after || \"\") + match;\n}\n\nfunction initialSpacingMatch(match) {\n  this.value.before = match;\n}\n\nfunction endSpacingMatch(match) {\n  this.value.after = match;\n}\n\nfunction unescapeString(content) {\n  return content.replace(/\\\\(?:([a-fA-F0-9]{1,6})|(.))/g, function (all, unicode, otherCharacter) {\n    if (otherCharacter) {\n      return otherCharacter;\n    }\n\n    var C = parseInt(unicode, 16);\n\n    if (C < 0x10000) {\n      return String.fromCharCode(C);\n    } else {\n      return String.fromCharCode(Math.floor((C - 0x10000) / 0x400) + 0xD800) + String.fromCharCode((C - 0x10000) % 0x400 + 0xDC00);\n    }\n  });\n}\n\nfunction stringMatch(match, content) {\n  var value = unescapeString(content);\n  this.value.nodes.push({\n    type: \"string\",\n    value: value,\n    stringType: match[0]\n  });\n}\n\nfunction commaMatch(match, spacing) {\n  var newValue = {\n    type: \"value\",\n    nodes: []\n  };\n\n  if (spacing) {\n    newValue.before = spacing;\n  }\n\n  this.root.nodes.push(newValue);\n  this.value = newValue;\n}\n\nfunction itemMatch(match) {\n  this.value.nodes.push({\n    type: \"item\",\n    name: match\n  });\n}\n\nfunction nestedItemMatch(match, name, spacing) {\n  this.stack.push(this.root);\n  this.root = {\n    type: \"nested-item\",\n    name: name,\n    nodes: [{\n      type: \"value\",\n      nodes: []\n    }]\n  };\n\n  if (spacing) {\n    this.root.nodes[0].before = spacing;\n  }\n\n  this.value.nodes.push(this.root);\n  this.value = this.root.nodes[0];\n}\n\nfunction nestedItemEndMatch(match, spacing, remaining) {\n  if (this.stack.length === 0) {\n    if (spacing) {\n      var item = this.value.nodes[this.value.nodes.length - 1];\n      item.after = (item.after || \"\") + spacing;\n    }\n\n    this.value.nodes.push({\n      type: \"invalid\",\n      value: remaining\n    });\n  } else {\n    if (spacing) {\n      this.value.after = spacing;\n    }\n\n    this.root = this.stack.pop();\n    this.value = this.root.nodes[this.root.nodes.length - 1];\n  }\n}\n\nfunction urlMatch(match, innerSpacingBefore, content, innerSpacingAfter) {\n  var item = {\n    type: \"url\"\n  };\n\n  if (innerSpacingBefore) {\n    item.innerSpacingBefore = innerSpacingBefore;\n  }\n\n  if (innerSpacingAfter) {\n    item.innerSpacingAfter = innerSpacingAfter;\n  }\n\n  switch (content[0]) {\n    case \"\\\"\":\n      item.stringType = \"\\\"\";\n      item.url = unescapeString(content.substr(1, content.length - 2));\n      break;\n\n    case \"'\":\n      item.stringType = \"'\";\n      item.url = unescapeString(content.substr(1, content.length - 2));\n      break;\n\n    default:\n      item.url = unescapeString(content);\n      break;\n  }\n\n  this.value.nodes.push(item);\n}\n\nvar parser = new Parser({\n  decl: {\n    \"^\\\\s+\": initialSpacingMatch,\n    \"/\\\\*([\\\\s\\\\S]*?)\\\\*/\": commentMatch,\n    \"\\\"((?:[^\\\\\\\\\\\"]|\\\\\\\\.)*)\\\"\": stringMatch,\n    \"'((?:[^\\\\\\\\']|\\\\\\\\.)*)'\": stringMatch,\n    \"url\\\\((\\\\s*)(\\\"(?:[^\\\\\\\\\\\"]|\\\\\\\\.)*\\\")(\\\\s*)\\\\)\": urlMatch,\n    \"url\\\\((\\\\s*)('(?:[^\\\\\\\\']|\\\\\\\\.)*')(\\\\s*)\\\\)\": urlMatch,\n    \"url\\\\((\\\\s*)((?:[^\\\\\\\\)'\\\"]|\\\\\\\\.)*)(\\\\s*)\\\\)\": urlMatch,\n    \"([\\\\w-]+)\\\\((\\\\s*)\": nestedItemMatch,\n    \"(\\\\s*)(\\\\))\": nestedItemEndMatch,\n    \",(\\\\s*)\": commaMatch,\n    \"\\\\s+$\": endSpacingMatch,\n    \"\\\\s+\": spacingMatch,\n    \"[^\\\\s,)]+\": itemMatch\n  }\n});\n\nfunction parseValues(str) {\n  var valueNode = {\n    type: \"value\",\n    nodes: []\n  };\n  var rootNode = {\n    type: \"values\",\n    nodes: [valueNode]\n  };\n  parser.parse(\"decl\", str, {\n    stack: [],\n    root: rootNode,\n    value: valueNode\n  });\n  return rootNode;\n}\n\nmodule.exports = parseValues;","map":{"version":3,"sources":["/Users/George/Documents/billy/node_modules/css-selector-tokenizer/lib/parseValues.js"],"names":["Parser","require","commentMatch","match","content","value","nodes","push","type","spacingMatch","item","length","after","initialSpacingMatch","before","endSpacingMatch","unescapeString","replace","all","unicode","otherCharacter","C","parseInt","String","fromCharCode","Math","floor","stringMatch","stringType","commaMatch","spacing","newValue","root","itemMatch","name","nestedItemMatch","stack","nestedItemEndMatch","remaining","pop","urlMatch","innerSpacingBefore","innerSpacingAfter","url","substr","parser","decl","parseValues","str","valueNode","rootNode","parse","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar Parser = require(\"fastparse\");\n\nfunction commentMatch(match, content) {\n\tthis.value.nodes.push({\n\t\ttype: \"comment\",\n\t\tcontent: content\n\t});\n}\n\nfunction spacingMatch(match) {\n\tvar item = this.value.nodes[this.value.nodes.length - 1];\n\titem.after = (item.after || \"\") + match;\n}\n\nfunction initialSpacingMatch(match) {\n\tthis.value.before = match;\n}\n\nfunction endSpacingMatch(match) {\n\tthis.value.after = match;\n}\n\nfunction unescapeString(content) {\n\treturn content.replace(/\\\\(?:([a-fA-F0-9]{1,6})|(.))/g, function(all, unicode, otherCharacter) {\n\t\tif (otherCharacter) {\n\t\t\treturn otherCharacter;\n\t\t}\n\n\t\tvar C = parseInt(unicode, 16);\n\t\tif(C < 0x10000) {\n\t\t\treturn String.fromCharCode(C);\n\t\t} else {\n\t\t\treturn String.fromCharCode(Math.floor((C - 0x10000) / 0x400) + 0xD800) +\n\t\t\t\tString.fromCharCode((C - 0x10000) % 0x400 + 0xDC00);\n\t\t}\n\t});\n}\n\nfunction stringMatch(match, content) {\n\tvar value = unescapeString(content);\n\tthis.value.nodes.push({\n\t\ttype: \"string\",\n\t\tvalue: value,\n\t\tstringType: match[0]\n\t});\n}\n\nfunction commaMatch(match, spacing) {\n\tvar newValue = {\n\t\ttype: \"value\",\n\t\tnodes: []\n\t};\n\tif(spacing) {\n\t\tnewValue.before = spacing;\n\t}\n\tthis.root.nodes.push(newValue);\n\tthis.value = newValue;\n}\n\nfunction itemMatch(match) {\n\tthis.value.nodes.push({\n\t\ttype: \"item\",\n\t\tname: match\n\t});\n}\n\nfunction nestedItemMatch(match, name, spacing) {\n\tthis.stack.push(this.root);\n\tthis.root = {\n\t\ttype: \"nested-item\",\n\t\tname: name,\n\t\tnodes: [\n\t\t\t{ type: \"value\", nodes: [] }\n\t\t]\n\t};\n\tif(spacing) {\n\t\tthis.root.nodes[0].before = spacing;\n\t}\n\tthis.value.nodes.push(this.root);\n\tthis.value = this.root.nodes[0];\n}\n\nfunction nestedItemEndMatch(match, spacing, remaining) {\n\tif(this.stack.length === 0) {\n\t\tif(spacing) {\n\t\t\tvar item = this.value.nodes[this.value.nodes.length - 1];\n\t\t\titem.after = (item.after || \"\") + spacing;\n\t\t}\n\t\tthis.value.nodes.push({\n\t\t\ttype: \"invalid\",\n\t\t\tvalue: remaining\n\t\t});\n\t} else {\n\t\tif(spacing) {\n\t\t\tthis.value.after = spacing;\n\t\t}\n\t\tthis.root = this.stack.pop();\n\t\tthis.value = this.root.nodes[this.root.nodes.length - 1];\n\t}\n}\n\nfunction urlMatch(match, innerSpacingBefore, content, innerSpacingAfter) {\n\tvar item = {\n\t\ttype: \"url\"\n\t};\n\tif(innerSpacingBefore) {\n\t\titem.innerSpacingBefore = innerSpacingBefore;\n\t}\n\tif(innerSpacingAfter) {\n\t\titem.innerSpacingAfter = innerSpacingAfter;\n\t}\n\tswitch(content[0]) {\n\t\tcase \"\\\"\":\n\t\t\titem.stringType = \"\\\"\";\n\t\t\titem.url = unescapeString(content.substr(1, content.length - 2));\n\t\t\tbreak;\n\t\tcase \"'\":\n\t\t\titem.stringType = \"'\";\n\t\t\titem.url = unescapeString(content.substr(1, content.length - 2));\n\t\t\tbreak;\n\t\tdefault:\n\t\t\titem.url = unescapeString(content);\n\t\t\tbreak;\n\t}\n\tthis.value.nodes.push(item);\n}\n\nvar parser = new Parser({\n\tdecl: {\n\t\t\"^\\\\s+\": initialSpacingMatch,\n\t\t\"/\\\\*([\\\\s\\\\S]*?)\\\\*/\": commentMatch,\n\t\t\"\\\"((?:[^\\\\\\\\\\\"]|\\\\\\\\.)*)\\\"\": stringMatch,\n\t\t\"'((?:[^\\\\\\\\']|\\\\\\\\.)*)'\": stringMatch,\n\t\t\"url\\\\((\\\\s*)(\\\"(?:[^\\\\\\\\\\\"]|\\\\\\\\.)*\\\")(\\\\s*)\\\\)\": urlMatch,\n\t\t\"url\\\\((\\\\s*)('(?:[^\\\\\\\\']|\\\\\\\\.)*')(\\\\s*)\\\\)\": urlMatch,\n\t\t\"url\\\\((\\\\s*)((?:[^\\\\\\\\)'\\\"]|\\\\\\\\.)*)(\\\\s*)\\\\)\": urlMatch,\n\t\t\"([\\\\w-]+)\\\\((\\\\s*)\": nestedItemMatch,\n\t\t\"(\\\\s*)(\\\\))\": nestedItemEndMatch,\n\t\t\",(\\\\s*)\": commaMatch,\n\t\t\"\\\\s+$\": endSpacingMatch,\n\t\t\"\\\\s+\": spacingMatch,\n\t\t\"[^\\\\s,)]+\": itemMatch\n\t}\n});\n\nfunction parseValues(str) {\n\tvar valueNode = {\n\t\ttype: \"value\",\n\t\tnodes: []\n\t};\n\tvar rootNode = {\n\t\ttype: \"values\",\n\t\tnodes: [\n\t\t\tvalueNode\n\t\t]\n\t};\n\tparser.parse(\"decl\", str, {\n\t\tstack: [],\n\t\troot: rootNode,\n\t\tvalue: valueNode\n\t});\n\treturn rootNode;\n}\n\nmodule.exports = parseValues;\n"]},"metadata":{},"sourceType":"script"}